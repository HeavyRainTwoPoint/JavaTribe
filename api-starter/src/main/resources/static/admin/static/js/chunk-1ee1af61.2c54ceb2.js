(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ee1af61"],{2532:function(t,e,a){"use strict";var n=a("23e7"),i=a("5a34"),o=a("1d80"),l=a("ab13");n({target:"String",proto:!0,forced:!l("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"4b20":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card",attrs:{border:""}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("数据列表")]),a("el-button",{staticClass:"button",on:{click:function(e){t.dialogAddVisible=!0}}},[t._v("+")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",highlightCurrentRow:!0,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{prop:"actTitle",label:"标题",align:"center"}}),a("el-table-column",{attrs:{prop:"actContent",label:"内容",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"actImgURL",label:"图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{attrs:{src:t.row.actImgURL,"preview-src-list":[t.row.actImgURL]}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return t.tableData.length>0?[a("el-button",{staticClass:"grey",attrs:{type:"text",icon:"el-icon-delete-solid"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v(" 删除 ")])]:void 0}}],null,!0)})],1)],1),a("div",{staticClass:"operationHide"},[a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.uploadLoading,expression:"uploadLoading"}],attrs:{title:"添加",visible:t.dialogAddVisible,"element-loading-text":"正在上传图片，请稍候","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(e){t.dialogAddVisible=e}}},[a("el-form",{attrs:{"label-width":"80px",model:t.form}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{model:{value:t.form.actTitle,callback:function(e){t.$set(t.form,"actTitle",e)},expression:"form.actTitle"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.actContent,callback:function(e){t.$set(t.form,"actContent",e)},expression:"form.actContent"}})],1),a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{ref:"upload",attrs:{action:t.uploadUrl,"file-list":t.fileList,"auto-upload":!1,"list-type":"picture","before-upload":t.handleBeforeUpload,"http-request":t.uploadFile,"on-exceed":t.handleExceed,"before-remove":t.beforeRemove,"on-change":t.changeFile,limit:1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过4MB ")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogAddVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1)],1)],1)],1)},i=[],o=(a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a3f3"));function l(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=o(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,s=!0,r=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return s=t.done,t},e:function(t){r=!0,l=t},f:function(){try{s||null==a["return"]||a["return"]()}finally{if(r)throw l}}}}a("a434"),a("caad"),a("2532"),a("b0c0");var s={name:"Nav",data:function(){return{tableData:[],loading:!1,dialogAddVisible:!1,form:{},fileList:[],imgs:[],uploadUrl:"",uploadLoading:!1}},created:function(){this.getData(),this.uploadUrl="http://47.92.200.8:8088/share/admin/uploadImg"},methods:{getData:function(){var t=this;this.loading=!0,this.$http.get("/life/life-infos").then((function(e){t.tableData=e.data})).catch((function(e){t.$message.error("网络异常，请稍后重试")})).finally((function(){t.loading=!1}))},handleDelete:function(t,e){var a=this;this.$confirm("确定删除这一个分类吗？","提示",{type:"warning"}).then((function(){a.$http.delete("/life/life-info/"+e.id).then((function(e){200==e.code&&(a.$message({message:"成功删除数据",type:"success"}),a.tableData.splice(t,1))}))})).catch((function(){}))},handleExceed:function(t,e){this.$message.warning("只能选择一张图片上传")},changeFile:function(t,e){this.fileList=e},submitUpload:function(){0==this.fileList.length?this.$message.warning("请选择一张图片"):(this.$refs.upload.submit(),this.uploadLoading=!0)},handleBeforeUpload:function(t){var e=t.type.includes("image");e||this.$message.error("上传文件类型必须是图片!");var a=t.size/1024/1024<4;return a||this.$message.error("上传图片大小不能超过 4MB!"),this.uploadLoading=!1,e&&a},uploadFile:function(t){var e=this,a=new FormData;a.append("file",t.file),this.$http.upload("/share/admin/uploadImg",a).then((function(a){e.$message({message:"文件上传成功",type:"success"}),e.fileList[0]={url:a.message,status:"success",name:t.file.name},e.photo=a.message})).catch((function(t){e.$message.error("文件上传失败，请联系管理员解决")})).finally((function(){e.uploadLoading=!1}))},beforeRemove:function(t,e){this.fileList=[]},add:function(){var t,e=this,a=this.form,n=a.actTitle,i=a.actContent,o=[],s=l(this.tableData);try{for(s.s();!(t=s.n()).done;){var r=t.value;o.push(r.actTitle)}}catch(c){s.e(c)}finally{s.f()}"undefined"==typeof n?this.$message({message:"请填写标题",type:"warning"}):"undefined"==typeof i?this.$message({message:"请填写内容",type:"warning"}):0==this.imgs.length?this.$message({message:"请先上传图片",type:"warning"}):o.includes(n)?this.$message({message:"这个标题已经存在，换个标题吧",type:"warning"}):this.$http.post("/life/life-info",{actTitle:n,actContent:i,imgs:this.imgs}).then((function(t){200==t.code&&(e.dialogAddVisible=!1,e.$message({message:"添加数据成功",type:"success"}),e.imgs=[],e.getData(),e.form={})}))}}},r=s,c=(a("ce99"),a("2877")),d=Object(c["a"])(r,n,i,!1,null,"2c9bbd32",null);e["default"]=d.exports},"5a34":function(t,e,a){var n=a("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},ab13:function(t,e,a){var n=a("b622"),i=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,"/./"[t](e)}catch(n){}}return!1}},caad:function(t,e,a){"use strict";var n=a("23e7"),i=a("4d64").includes,o=a("44d2");n({target:"Array",proto:!0},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},ce99:function(t,e,a){"use strict";a("d2cf")},d2cf:function(t,e,a){}}]);