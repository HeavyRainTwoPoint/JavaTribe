(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a5bf340"],{"137d":function(t,e,a){"use strict";a("1d03")},"1d03":function(t,e,a){},"7e57":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-wrap"},[a("div",{staticClass:"ms-login"},[a("div",{staticClass:"ms-title"},[t._v("后台管理系统")]),a("el-form",{ref:"login",staticClass:"ms-content",attrs:{model:t.param,rules:t.rules,"label-width":"0px"}},[a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{placeholder:"账号"},on:{blur:t.getUserType},model:{value:t.param.account,callback:function(e){t.$set(t.param,"account",e)},expression:"param.account"}},[a("el-button",{attrs:{slot:"prepend",icon:"el-icon-user-solid"},slot:"prepend"})],1)],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm()}},model:{value:t.param.password,callback:function(e){t.$set(t.param,"password",e)},expression:"param.password"}},[a("el-button",{attrs:{slot:"prepend",icon:"el-icon-lock"},slot:"prepend"})],1)],1),a("div",{staticClass:"login-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("登录")])],1),a("p",{staticClass:"login-tips"},[t._v("Tips : 请正确填写用户名与密码。")])],1)],1)])},r=[],o={data:function(){return{param:{account:"",password:""},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{submitForm:function(){var t=this;this.$refs.login.validate((function(e){if(!e)return t.$message.error("请输入账号和密码"),!1;t.authLogin()}))},authLogin:function(){var t=this,e=this.param,a=e.account,s=e.password;this.$http.post("javatribe/common/user/login",{account:a,password:s}).then((function(e){-1==e.data.status?t.$message.error("账号或者密码错误"):(localStorage.setItem("username",e.data.userrealname),localStorage.setItem("token",e.data.token),t.$router.push("/nav"))})).catch((function(e){t.$message.error("登录失败，可能是教务系统崩了，请联系管理员解决问题")}))},getUserType:function(){var t=this,e=this.param.account;this.$http.get("javatribe/common/user/user_type?account="+e).then((function(e){"1"==e.data||null==e.data?t.$message.error("这个账号没有权限登录管理端，请找超级管理员分配权限"):localStorage.setItem("userType",e.data)}))}}},n=o,i=(a("137d"),a("2877")),c=Object(i["a"])(n,s,r,!1,null,"c10bd812",null);e["default"]=c.exports}}]);