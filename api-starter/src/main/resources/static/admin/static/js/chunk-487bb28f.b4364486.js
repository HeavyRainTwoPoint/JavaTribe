(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-487bb28f"],{"483d":function(t,e,n){"use strict";n("9a9b")},"9a9b":function(t,e,n){},b727:function(t,e,n){var i=n("0366"),o=n("44ad"),a=n("7b0b"),s=n("50c4"),c=n("65f0"),r=[].push,l=function(t){var e=1==t,n=2==t,l=3==t,d=4==t,u=6==t,m=7==t,h=5==t||u;return function(f,p,g,b){for(var w,v,y=a(f),$=o(y),C=i(p,g,3),x=s($.length),_=0,k=b||c,D=e?k(f,x):n||m?k(f,0):void 0;x>_;_++)if((h||_ in $)&&(w=$[_],v=C(w,_,y),t))if(e)D[_]=v;else if(v)switch(t){case 3:return!0;case 5:return w;case 6:return _;case 2:r.call(D,w)}else switch(t){case 4:return!1;case 7:r.call(D,w)}return u?-1:l||d?d:D}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},cbbb:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show?t._e():n("el-card",{staticClass:"box-card",attrs:{border:""}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"title"},[t._v("数据列表")]),n("el-button",{staticClass:"button",on:{click:t.goMavon}},[t._v("+")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",highlightCurrentRow:!0,"max-height":"450","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("el-table-column",{attrs:{prop:"competitionName",label:"比赛名字",align:"center"}}),n("el-table-column",{attrs:{prop:"showContent",label:"比赛介绍",align:"center","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"是否可在前端报名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:1===e.row.signUp?"success":0===e.row.signUp?"warning":""}},[t._v(" "+t._s(e.row.sign)+" ")])]}}],null,!1,1236577651)}),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return t.tableData.length>0?[n("el-button",{staticClass:"grey",attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v(" 编辑 ")]),n("el-button",{staticClass:"grey",attrs:{type:"text",icon:"el-icon-delete-solid"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[t._v(" 删除 ")])]:void 0}}],null,!0)})],1)],1),t.show?n("div",{staticClass:"container"},[n("el-input",{staticClass:"md-title",attrs:{placeholder:"比赛名字"},model:{value:t.form.competitionName,callback:function(e){t.$set(t.form,"competitionName",e)},expression:"form.competitionName"}}),n("mavon-editor",{ref:"md",staticStyle:{"min-height":"600px"},on:{imgAdd:t.$imgAdd,change:t.change},model:{value:t.form.showContent,callback:function(e){t.$set(t.form,"showContent",e)},expression:"form.showContent"}}),n("el-button",{staticClass:"editor-btn",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),n("el-button",{staticClass:"editor-btn",attrs:{type:"primary"},on:{click:function(e){t.show=!1}}},[t._v("返回")])],1):t._e()],1)},o=[],a=(n("d3b7"),n("d81d"),n("a434"),n("b2d8")),s=(n("64e1"),{name:"Editor",data:function(){return{tableData:[],loading:!1,form:{},show:!1,flag:"add",html:""}},components:{mavonEditor:a["mavonEditor"]},created:function(){this.getData()},methods:{getData:function(){var t=this;this.loading=!0,this.$http.get("/competition/competition_introduce").then((function(e){t.tableData=e.data.map((function(t){return 1==t.signUp?t.sign="可以":0==t.signUp&&(t.sign="不可以"),t}))})).catch((function(){t.$message({message:"网络异常，请稍后重试",type:"error"})})).finally((function(){t.loading=!1}))},goMavon:function(){var t=this;this.$confirm("需要添加一个比赛吗？","提示",{type:"sussess"}).then((function(){t.show=!0,t.flag="add",t.form={}})).catch((function(){}))},handleEdit:function(t,e){var n=this;this.$confirm("需要修改这个比赛的介绍吗？","提示",{type:"sussess"}).then((function(){n.show=!0,n.flag="editor",n.form=JSON.parse(JSON.stringify(e))})).catch((function(){}))},handleDelete:function(t,e){var n=this;this.$confirm("确定删除这一个分类吗？","提示",{type:"warning"}).then((function(){n.$http.delete("/competition/competition/"+e.competitionId).then((function(e){n.$message({message:"删除成功",type:"success"}),n.tableData.splice(t,1)}))})).catch((function(){}))},$imgAdd:function(t,e){var n=this,i=new FormData;i.append("image",e),this.$http.upload("/share/admin/upload",i).then((function(e){200==e.code&&n.$refs.md.$img2Url(t,e.message)}))},getUpload:function(t){t=t.data},change:function(t,e){this.html=e},submit:function(){"add"==this.flag?this.add():"editor"==this.flag&&this.update()},add:function(){var t=this,e=this.form,n=e.competitionName,i=e.showContent;"undefined"==typeof n?this.$message({message:"请输入比赛名称",type:"warning"}):"undefined"==typeof i?this.$message({message:"请输入比赛介绍",type:"warning"}):this.$http.post("/competition/competition",{competitionName:n,showContent:i,signUp:1}).then((function(e){200==e.code&&(t.show=!1,t.$message({message:"添加比赛介绍成功",type:"success"}),t.getData())}))},update:function(){var t=this,e=this.form,n=e.competitionName,i=e.showContent,o=e.competitionId;this.$http.post("/competition/competition",{competitionId:o,competitionName:n,showContent:i,signUp:1}).then((function(e){200==e.code&&(t.show=!1,t.$message({message:"修改比赛介绍成功",type:"success"}),t.getData())}))}}}),c=s,r=(n("483d"),n("2877")),l=Object(r["a"])(c,i,o,!1,null,"a141b3ec",null);e["default"]=l.exports},d81d:function(t,e,n){"use strict";var i=n("23e7"),o=n("b727").map,a=n("1dde"),s=a("map");i({target:"Array",proto:!0,forced:!s},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);