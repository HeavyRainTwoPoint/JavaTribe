(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e3fb77a"],{"0b7a":function(e,t,a){"use strict";a("bea0")},"1dde":function(e,t,a){var i=a("d039"),n=a("b622"),o=a("2d00"),r=n("species");e.exports=function(e){return o>=51||!i((function(){var t=[],a=t.constructor={};return a[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,a){var i=a("861d"),n=a("e8b5"),o=a("b622"),r=o("species");e.exports=function(e,t){var a;return n(e)&&(a=e.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?i(a)&&(a=a[r],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===t?0:t)}},8418:function(e,t,a){"use strict";var i=a("c04e"),n=a("9bf2"),o=a("5c6c");e.exports=function(e,t,a){var r=i(t);r in e?n.f(e,r,o(0,a)):e[r]=a}},a434:function(e,t,a){"use strict";var i=a("23e7"),n=a("23cb"),o=a("a691"),r=a("50c4"),d=a("7b0b"),s=a("65f0"),l=a("8418"),m=a("1dde"),c=m("splice"),u=Math.max,p=Math.min,f=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!c},{splice:function(e,t){var a,i,m,c,b,h,v=d(this),L=r(v.length),y=n(e,L),I=arguments.length;if(0===I?a=i=0:1===I?(a=0,i=L-y):(a=I-2,i=p(u(o(t),0),L-y)),L+a-i>f)throw TypeError(g);for(m=s(v,i),c=0;c<i;c++)b=y+c,b in v&&l(m,c,v[b]);if(m.length=i,a<i){for(c=y;c<L-i;c++)b=c+i,h=c+a,b in v?v[h]=v[b]:delete v[h];for(c=L;c>L-i+a;c--)delete v[c-1]}else if(a>i)for(c=L-i;c>y;c--)b=c+i-1,h=c+a-1,b in v?v[h]=v[b]:delete v[h];for(c=0;c<a;c++)v[c+y]=arguments[c+2];return v.length=L-i+a,m}})},bea0:function(e,t,a){},d471:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[e._v("比赛选择")])]),e._l(e.competitionList,(function(t){return a("div",{key:t.competitionId,staticClass:"box"},[a("div",{staticClass:"direction",class:{active:e.competitionId==t.competitionId},on:{click:function(a){return e.getData(t.competitionId)}}},[e._v(" "+e._s(t.competitionName)+" ")])])}))],2),a("div",{staticClass:"bottom"},[a("el-card",{staticClass:"box-card",attrs:{border:""}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[e._v("数据列表")]),a("el-button",{staticClass:"button",on:{click:function(t){e.dialogAddVisible=!0}}},[e._v("+")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",highlightCurrentRow:!0}},[a("el-table-column",{attrs:{prop:"teamName",label:"队伍名称",align:"center"}}),a("el-table-column",{attrs:{prop:"teamLeaderName",label:"队长姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"teamLeaderStudentId",label:"队长学号",align:"center"}}),a("el-table-column",{attrs:{prop:"teamLeaderPhone",label:"队长电话",align:"center"}}),a("el-table-column",{attrs:{prop:"teamLeaderWechat",label:"队长微信",align:"center"}}),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.teamUserList,(function(t,i){return a("el-form",{key:t.studentId,staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"成员"+(i+1)+"姓名"}},[a("span",[e._v(e._s(t.studentName))])]),a("el-form-item",{attrs:{label:"成员"+(i+1)+"学号"}},[a("span",[e._v(e._s(t.studentId))])])],1)}))}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return e.tableData.length>0?[a("el-button",{staticClass:"grey",attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(" 编辑 ")]),a("el-button",{staticClass:"grey",attrs:{type:"text",icon:"el-icon-delete-solid"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(" 删除 ")])]:void 0}}],null,!0)})],1)],1)],1),a("div",{staticClass:"operationHide"},[a("el-dialog",{attrs:{title:"添加",visible:e.dialogAddVisible},on:{"update:visible":function(t){e.dialogAddVisible=t}}},[a("el-form",{attrs:{model:e.addForm,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"队伍名称"}},[a("el-input",{model:{value:e.addForm.teamName,callback:function(t){e.$set(e.addForm,"teamName",t)},expression:"addForm.teamName"}})],1),a("el-form-item",{attrs:{label:"队长姓名"}},[a("el-input",{model:{value:e.addForm.teamLeaderName,callback:function(t){e.$set(e.addForm,"teamLeaderName",t)},expression:"addForm.teamLeaderName"}})],1),a("el-form-item",{attrs:{label:"队长电话",prop:"teamLeaderPhone"}},[a("el-input",{model:{value:e.addForm.teamLeaderPhone,callback:function(t){e.$set(e.addForm,"teamLeaderPhone",t)},expression:"addForm.teamLeaderPhone"}})],1),a("el-form-item",{attrs:{label:"队长学号",prop:"teamLeaderStudentId"}},[a("el-input",{model:{value:e.addForm.teamLeaderStudentId,callback:function(t){e.$set(e.addForm,"teamLeaderStudentId",t)},expression:"addForm.teamLeaderStudentId"}})],1),a("el-form-item",{attrs:{label:"队长微信"}},[a("el-input",{model:{value:e.addForm.teamLeaderWechat,callback:function(t){e.$set(e.addForm,"teamLeaderWechat",t)},expression:"addForm.teamLeaderWechat"}})],1),a("el-form-item",{attrs:{label:"队长所在学院"}},[a("el-input",{model:{value:e.addForm.teamLeaderCollege,callback:function(t){e.$set(e.addForm,"teamLeaderCollege",t)},expression:"addForm.teamLeaderCollege"}})],1),e._l(e.teamUserList,(function(t){return a("div",{key:t.id,staticClass:"teamUser"},[a("div",[e._v(" 队员学号"),a("el-input",{staticClass:"input",model:{value:t.studentId,callback:function(a){e.$set(t,"studentId",a)},expression:"item.studentId"}})],1),a("div",[e._v(" 队员姓名"),a("el-input",{staticClass:"input",model:{value:t.studentName,callback:function(a){e.$set(t,"studentName",a)},expression:"item.studentName"}})],1)])})),a("el-button",{attrs:{type:"primary"},on:{click:e.addTeamUser}},[e._v("添加成员")])],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.dialogChangeVisible},on:{"update:visible":function(t){e.dialogChangeVisible=t}}},[a("el-form",{attrs:{"label-width":"80px",model:e.updateForm}},[a("el-form-item",{attrs:{label:"队伍名称"}},[a("el-input",{model:{value:e.updateForm.teamName,callback:function(t){e.$set(e.updateForm,"teamName",t)},expression:"updateForm.teamName"}})],1),a("el-form-item",{attrs:{label:"队长姓名"}},[a("el-input",{model:{value:e.updateForm.teamLeaderName,callback:function(t){e.$set(e.updateForm,"teamLeaderName",t)},expression:"updateForm.teamLeaderName"}})],1),a("el-form-item",{attrs:{label:"队长电话"}},[a("el-input",{model:{value:e.updateForm.teamLeaderPhone,callback:function(t){e.$set(e.updateForm,"teamLeaderPhone",t)},expression:"updateForm.teamLeaderPhone"}})],1),a("el-form-item",{attrs:{label:"队长学号"}},[a("el-input",{model:{value:e.updateForm.teamLeaderStudentId,callback:function(t){e.$set(e.updateForm,"teamLeaderStudentId",t)},expression:"updateForm.teamLeaderStudentId"}})],1),a("el-form-item",{attrs:{label:"队长微信"}},[a("el-input",{model:{value:e.updateForm.teamLeaderWechat,callback:function(t){e.$set(e.updateForm,"teamLeaderWechat",t)},expression:"updateForm.teamLeaderWechat"}})],1),e._l(e.updateForm.teamUserList,(function(t){return a("div",{key:t.id,staticClass:"teamUser"},[a("div",[e._v(" 队员学号"),a("el-input",{staticClass:"input",model:{value:t.studentId,callback:function(a){e.$set(t,"studentId",a)},expression:"item.studentId"}})],1),a("div",[e._v(" 队员姓名"),a("el-input",{staticClass:"input",model:{value:t.studentName,callback:function(a){e.$set(t,"studentName",a)},expression:"item.studentName"}})],1)])}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogChangeVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])],1)],1)],1)],1)},n=[];function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a("d3b7"),a("a434");var r={name:"Sign",data:function(){var e,t=function(e,t,a){var i=/^(13|14|15|17|18)\d{9}$/;if(!i.test(t))return a(new Error("请输入正确的电话号码"))},a=function(e,t,a){if(t&&9!=t.length)return a(new Error("请输入正确的学号"))};return e={tableData:[],competitionList:[],teamUserList:[{studentId:void 0,studentName:void 0}],gradeList:[],loading:!1,dialogAddVisible:!1,dialogChangeVisible:!1,addForm:{},updateForm:{},activeName:1,competitionId:1},o(e,"activeName","1"),o(e,"rules",{teamLeaderPhone:[{validator:t,trigger:"blur"}],teamLeaderStudentId:[{validator:a,trigger:"blur"}]}),e},created:function(){this.getCompetitionList(),this.getData(this.competitionId)},methods:{getCompetitionList:function(){var e=this;this.$http.get("/competition/competition_introduce").then((function(t){200==t.code&&(e.competitionList=t.data,e.competitionId=t.data[0].competitionId)}))},getData:function(e){var t=this;this.competitionId=e,this.loading=!0,this.$http.get("competition/registerList",{competitionId:this.competitionId}).then((function(e){200==e.code&&(t.tableData=JSON.parse(e.data))})).catch((function(e){t.$message.error("网络异常，请稍后重试")})).finally((function(){t.loading=!1}))},handleDelete:function(e,t){var a=this;this.$confirm("确定删除这一个分类吗？","提示",{type:"warning"}).then((function(){a.$http.delete("/competition/deleteRegisterData",{registerId:t.registerId}).then((function(t){200==t.code&&(a.$message({message:"成功删除一条数据",type:"success"}),a.tableData.splice(e,1))}))})).catch((function(){}))},handleEdit:function(e,t){this.updateForm=JSON.parse(JSON.stringify(t)),this.dialogChangeVisible=!0},addTeamUser:function(){this.teamUserList.push({studentId:void 0,studentName:void 0})},add:function(){var e=this,t=this.addForm,a=t.teamName,i=t.teamLeaderName,n=t.teamLeaderPhone,o=t.teamLeaderStudentId,r=t.teamLeaderWechat,d=t.teamLeaderCollege,s=JSON.parse(JSON.stringify(this.teamUserList)),l=this.tableData.every((function(e){return e.teamLeaderStudentId!=o}));console.log(l),"undefined"==typeof a?this.$message({message:"请输入队伍名称",type:"warning"}):"undefined"==typeof i?this.$message({message:"请输入队长姓名",type:"warning"}):"undefined"==typeof n?this.$message({message:"请输入队长电话",type:"warning"}):"undefined"==typeof o?this.$message({message:"请输入队长学号",type:"warning"}):"undefined"==typeof r?this.$message({message:"请输入队长微信",type:"warning"}):"undefined"==typeof d?this.$message({message:"请输入队长所在学院",type:"warning"}):l?this.$http.post("/competition/addRegisterData",{competitionId:this.competitionId,teamName:a,teamLeaderName:i,teamLeaderWechat:r,teamLeaderStudentId:o,teamLeaderPhone:n,teamUserList:s,teamLeaderCollege:d}).then((function(t){200==t.code?(e.$message({message:"成功添加一条数据",type:"success"}),e.getData(e.competitionId),e.dialogAddVisible=!1,e.addForm={},e.teamUserList=[{studentId:void 0,studentName:void 0}]):401==t.code&&e.$message({message:t.message,type:"warning"})})):(this.$message({message:"这个队长学号已经报过名了，请换一个学号",type:"warning"}),this.addForm.teamLeaderStudentId=void 0)},update:function(){var e=this,t=this.updateForm,a=t.registerId,i=t.teamName,n=t.teamLeaderName,o=t.teamLeaderPhone,r=t.teamLeaderStudentId,d=t.teamLeaderWechat,s=t.teamUserList,l=t.teamLeaderCollege;this.$http.put("/competition/editRegisterData",{registerId:a,competitionId:this.competitionId,teamName:i,teamLeaderName:n,teamLeaderPhone:o,teamLeaderStudentId:r,teamLeaderWechat:d,teamLeaderCollege:l,teamUserList:s}).then((function(t){200==t.code&&(e.$message({message:"成功修改一条数据",type:"success"}),e.getData(e.competitionId),e.dialogChangeVisible=!1)}))}}},d=r,s=(a("0b7a"),a("2877")),l=Object(s["a"])(d,i,n,!1,null,"12d6667e",null);t["default"]=l.exports},e8b5:function(e,t,a){var i=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}}}]);